<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lysted Training | CHEAP ASSIST</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <nav class="navbar">
        <a href="index.html" class="logo">CA</a>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="training.html">Back to Tools</a></li>
        </ul>
    </nav>

    <main class="project-detail-container">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRB2zutjoQNvMmp93rvRjVaESJNJYl2DFageQ&s" alt="Lysted Logo" style="height: 100px; width: auto; border-radius: 50%;">
        <h1>LYSTED Training</h1>
        <hr>
        
        <div id="video-placeholder" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; margin: 30px 0; background: #000;">
            <div id="player" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
        </div>

        <div class="module-list">
            <h3>Training Modules</h3>
            <div class="module-links" id="module-container">
                <a href="lysted-m1.html" class="module-item locked">
                    <span><strong>Module 1:</strong> Account Setup and API Integration</span>
                    <span class="arrow">ðŸ”’</span>
                </a>
                <a href="lysted-m2.html" class="module-item locked">
                    <span><strong>Module 2:</strong> Listing Tickets for Sale</span>
                    <span class="arrow">ðŸ”’</span>
                </a>
                <a href="lysted-m3.html" class="module-item locked">
                    <span><strong>Module 3:</strong> Inventory Management & Auto-Pricing</span>
                    <span class="arrow">ðŸ”’</span>
                </a>
                <a href="lysted-m4.html" class="module-item locked">
                    <span><strong>Module 4:</strong> Handling Payouts and Orders</span>
                    <span class="arrow">ðŸ”’</span>
                </a>
            </div>
        </div>
    </main>

<footer>
        <p>&copy; 2024 Kevin Kline Fangasan. All Rights Reserved.</p>
    </footer>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        var player;
        var watchedTime = 0;
        var timer;

        // 2. This function creates the player after the API code downloads
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: 'WVDOg4rycWE', // Your Lysted video ID
                playerVars: {
                    'rel': 0,
                    'modestbranding': 1,
                    'controls': 1 
                },
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 3. Monitor video state (Playing, Paused, Ended)
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                // Start the stopwatch every 1 second
                timer = setInterval(function() {
                    watchedTime++;
                }, 1000);
            } else {
                // Stop the stopwatch if they pause or the video ends
                clearInterval(timer);
            }

            if (event.data == YT.PlayerState.ENDED) {
                checkCompletion();
            }
        }

        // 4. Check if they actually watched or just skipped
        function checkCompletion() {
            var totalDuration = player.getDuration();
            
            // If they watched at least 95% of the total time
            if (watchedTime >= (totalDuration * 0.95)) {
                unlockModules();
            } else {
                alert("Nice try! Please watch the full video without skipping to unlock the modules.");
                player.seekTo(0); // Optional: Restart video
                watchedTime = 0;   // Reset stopwatch
            }
        }

        // 5. Remove the locked status from all modules
        function unlockModules() {
            const modules = document.querySelectorAll('.module-item');
            modules.forEach(module => {
                module.classList.remove('locked');
                const arrowIcon = module.querySelector('.arrow');
                arrowIcon.innerText = 'â†’'; 
            });
            alert("Congratulations! You've finished the tutorial. Modules are now unlocked.");
        }
    </script>
</body>
</html>